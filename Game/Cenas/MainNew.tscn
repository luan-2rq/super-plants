[gd_scene load_steps=46 format=3 uid="uid://c4j4wd1y2ocnj"]

[ext_resource type="Script" path="res://Game/Scripts/Tree/NormalTreeNode.gd" id="1"]
[ext_resource type="Resource" path="res://Game/Configs/PlantConfig.tres" id="3"]
[ext_resource type="PackedScene" path="res://Game/Folder/low_poly_truck.tscn" id="4"]
[ext_resource type="Script" path="res://Game/Scripts/Tree/DirectionalTreeNode.gd" id="5"]
[ext_resource type="Script" path="res://Game/Scripts/Checkpoints/CheckpointsController.gd" id="6"]
[ext_resource type="Script" path="res://Game/Cenas/Main.gd" id="7"]
[ext_resource type="Script" path="res://Game/Scripts/Checkpoints/CheckpointConfig.gd" id="8"]
[ext_resource type="Script" path="res://Game/Scripts/Checkpoints/CheckpointsConfig.gd" id="9"]
[ext_resource type="PackedScene" path="res://External/Terrain/Terrain.tscn" id="10"]
[ext_resource type="Script" path="res://Game/Scripts/Tree/PlantManager.gd" id="12"]
[ext_resource type="PackedScene" path="res://Game/Prefabs/Upgrades/UpgradeCell.tscn" id="13"]
[ext_resource type="Script" path="res://Game/Scripts/PopupsController.gd" id="14"]
[ext_resource type="PackedScene" uid="uid://duqd8vfbhcsf1" path="res://Game/Prefabs/Settings/SettingsPopup.tscn" id="15"]
[ext_resource type="Resource" path="res://Game/Configs/DirectionalRootConfig.tres" id="16"]
[ext_resource type="PackedScene" uid="uid://bw56307x8y7k6" path="res://Game/Prefabs/StoreScreen.tscn" id="17"]
[ext_resource type="Script" path="res://Game/Scripts/ScreensController.gd" id="18"]
[ext_resource type="PackedScene" path="res://Game/Prefabs/Extrimity.tscn" id="19"]
[ext_resource type="Material" path="res://Game/Materials/GrowthProgressBar.tres" id="20"]
[ext_resource type="Script" path="res://Game/Scripts/GroundElements/GroundElementsManager.gd" id="21"]
[ext_resource type="Resource" uid="uid://b1xbvjvfytdix" path="res://Game/Configs/GroundElementsConfig.tres" id="22"]
[ext_resource type="Script" path="res://Game/Scripts/Tree/RootManager.gd" id="23"]
[ext_resource type="FontFile" path="res://Game/Fonts/FontPreset.tres" id="24"]
[ext_resource type="Script" path="res://Game/Scripts/TopHUDController.gd" id="25"]
[ext_resource type="PackedScene" path="res://Game/Prefabs/Train.tscn" id="27"]
[ext_resource type="Script" path="res://Game/Scripts/ScrollController.gd" id="28"]
[ext_resource type="Script" path="res://Game/Scripts/VisualMetricSystem.gd" id="29"]
[ext_resource type="Resource" path="res://Game/Configs/MetricSystemConfig.tres" id="30"]
[ext_resource type="Script" path="res://Game/Scripts/CustomScrollContainer.gd" id="31"]
[ext_resource type="Script" path="res://Game/Scripts/Draggables/DraggableButtonsController.gd" id="32"]
[ext_resource type="Resource" uid="uid://f8pd3axrjvvb" path="res://Game/Configs/DraggablesConfig.tres" id="33"]
[ext_resource type="PackedScene" path="res://Game/Prefabs/BoostsScreen.tscn" id="34"]
[ext_resource type="Script" path="res://Game/Scripts/ArrowsController.gd" id="35"]
[ext_resource type="Resource" path="res://Game/Configs/ArrowsConfig.tres" id="36"]
[ext_resource type="PackedScene" path="res://Game/Prefabs/FloatingText.tscn" id="37"]
[ext_resource type="Script" path="res://Game/Scripts/Collectables/CollectablesController.gd" id="38"]
[ext_resource type="Resource" path="res://Game/Configs/CollectablesConfig.tres" id="39"]
[ext_resource type="PackedScene" uid="uid://r8b13emrhyia" path="res://Game/Prefabs/OfflineProductionPopup.tscn" id="40"]
[ext_resource type="Script" path="res://External/ExpandableCells/Scripts/ExpandableCellsContainer.gd" id="41"]
[ext_resource type="Script" path="res://Game/Scripts/Upgrades/UpgradesController.gd" id="42"]
[ext_resource type="Script" path="res://External/ExpandableCells/Scripts/ExpandableCellsController.gd" id="43"]
[ext_resource type="Resource" uid="uid://cbenxqjqon5s8" path="res://Game/Configs/UpgradesConfig.tres" id="44"]

[sub_resource type="Resource" id="1"]
script = ExtResource("8")
vertical_local_position = 500.0
color = Color(0.737255, 0.172549, 0.172549, 1)
reward = 0
tree_type = 0

[sub_resource type="Resource" id="2"]
script = ExtResource("8")
vertical_local_position = 950.0
color = Color(0.00392157, 0.627451, 0.321569, 1)
reward = 0
tree_type = 0

[sub_resource type="Resource" id="3"]
script = ExtResource("8")
vertical_local_position = 1600.0
color = Color(0.933333, 0.0980392, 0.921569, 1)
reward = 0
tree_type = 0

[sub_resource type="Resource" id="4"]
script = ExtResource("9")
checkpoints = Array[ExtResource("8")]([SubResource("1"), SubResource("2"), SubResource("3")])
checkpoint_vertical_size = 70.0

[node name="Main" type="Node2D"]
script = ExtResource("7")

[node name="MainCanvas" type="CanvasLayer" parent="."]

[node name="PlantManager" type="Control" parent="MainCanvas"]
layout_mode = 3
anchor_right = 0.997
anchor_bottom = 0.999
offset_right = 0.159973
offset_bottom = 0.599854
script = ExtResource("12")
plant_path = NodePath("ScrollController/PlantScrollContainer/Control/Plant")
plant_scroll_container_path = NodePath("ScrollController/PlantScrollContainer")
plant_scroll_container_control_path = NodePath("ScrollController/PlantScrollContainer/Control")
ground_elements_manager_path = NodePath("ScrollController/RootScrollContainer/RootManager/GroundElementsManager")

[node name="BackgroundPlant" type="ColorRect" parent="MainCanvas/PlantManager"]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 0.469
offset_right = 6.10352e-05
offset_bottom = 0.0690308
color = Color(0.294118, 0.584314, 0.847059, 1)

[node name="BackgroundRoot" type="ColorRect" parent="MainCanvas/PlantManager"]
layout_mode = 0
anchor_top = 0.469
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 0.0690308
offset_right = 6.10352e-05
offset_bottom = 1.00012
color = Color(0.639216, 0.368627, 0.12549, 1)

[node name="ScrollController" type="Control" parent="MainCanvas/PlantManager"]
anchors_preset = 0
anchor_right = 1.003
anchor_bottom = 1.001
offset_right = -0.153931
offset_bottom = -0.598999
script = ExtResource("28")
plant_scroll_container_path = NodePath("PlantScrollContainer")
root_scroll_container_path = NodePath("RootScrollContainer")

[node name="PlantScrollContainer" type="Container" parent="MainCanvas/PlantManager/ScrollController"]
clip_contents = true
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 0.469
offset_bottom = -0.400024
script = ExtResource("31")
v_scroll = 1050

[node name="Control" type="Control" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer"]
custom_minimum_size = Vector2(720, 1800)
layout_mode = 2
size_flags_horizontal = 3
mouse_filter = 1
script = ExtResource("6")
checkpoint_configs = SubResource("4")

[node name="Polygon2D3" type="Polygon2D" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control"]
visible = false
position = Vector2(666.184, 1757.51)
scale = Vector2(1.7698, 1.22512)
color = Color(0.376471, 0.219608, 0.0784314, 1)
offset = Vector2(101.172, -221.099)
polygon = PackedVector2Array(-496.237, 261.299, -474.799, 216.37, -453.362, 183.264, -424.268, 150.158, -375.075, 127.961, -319.508, 118.654, -260.153, 120.981, -97.886, 145.59, -9.74023, 144.774, 63.1495, 163.548, 137.143, 164.286, 212.857, 147.143, 258.674, 150.158, 300.018, 174.987, 330.643, 206.911, 361.268, 245.928, 375.05, 267.211, 254.08, 264.846, -452.11, 261.737)

[node name="Screen" type="Sprite2D" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control"]
visible = false
z_index = 12
position = Vector2(360, 1625)
scale = Vector2(1.4, 1.4)

[node name="Polygon2D" type="Polygon2D" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control"]
position = Vector2(360, 1772)
scale = Vector2(1.73641, 0.50202)
color = Color(0.803922, 0.458824, 0.156863, 1)
offset = Vector2(94.6793, -189.116)
polygon = PackedVector2Array(-533.7, 115.414, -419.487, 83.5425, -218.498, 39.7195, -90.0721, 15.8161, 131.65, 41.7115, 300.965, 57.6471, 444.94, 51.6713, 532.477, 31.7517, 535.356, 280.746, -536.146, 244.891)

[node name="CollectablesController" type="Node2D" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control"]
scale = Vector2(0.025, 0.025)
script = ExtResource("38")
ground_path = NodePath("../GroundPosition")
collectables_config = ExtResource("39")

[node name="Plant" type="Node2D" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control"]
position = Vector2(360, 1720)
scale = Vector2(1.5, 1.5)
script = ExtResource("1")
tree_structure_config = ExtResource("3")
collectables_controller_path = NodePath("../CollectablesController")

[node name="GrowthProgress" type="TextureRect" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control" groups=["NotCentered"]]
material = ExtResource("20")
layout_mode = 0
offset_top = 392.0
offset_right = 50.0
offset_bottom = 626.0
scale = Vector2(1, -1)
expand_mode = 1
flip_v = true

[node name="Road" type="ColorRect" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control"]
layout_mode = 0
offset_left = -650.0
offset_top = 1740.0
offset_right = 1403.0
offset_bottom = 1800.0
color = Color(0.156863, 0.156863, 0.156863, 1)

[node name="Area2D" type="Area2D" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control" groups=["Ground", "NotCentered"]]
visible = false
position = Vector2(0, 881.99)
collision_layer = 2
collision_mask = 2

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control/Area2D"]
polygon = PackedVector2Array(-70, 448, 0, 449, -1, 828, 723, 825, 720, 437, 794, 439, 795, 887, -72, 889)

[node name="Sprite2D" type="Sprite2D" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control"]
visible = false
position = Vector2(662.5, 1684.5)
scale = Vector2(0.091, 0.089)

[node name="Train" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control" instance=ExtResource("27")]
position = Vector2(0, 1770)
collectables_controller_path = NodePath("../CollectablesController")

[node name="GroundPosition" type="Marker2D" parent="MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control"]
position = Vector2(360, 1700)

[node name="RootScrollContainer" type="Container" parent="MainCanvas/PlantManager/ScrollController"]
clip_contents = true
layout_mode = 0
anchor_top = 0.469
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -0.400024
script = ExtResource("31")

[node name="RootManager" type="Control" parent="MainCanvas/PlantManager/ScrollController/RootScrollContainer"]
custom_minimum_size = Vector2(720, 10000)
layout_mode = 2
size_flags_horizontal = 3
mouse_filter = 1
script = ExtResource("23")
root_path = NodePath("Root")
extremity = ExtResource("19")

[node name="ArrowsController" type="Node2D" parent="MainCanvas/PlantManager/ScrollController/RootScrollContainer/RootManager"]
z_index = 10
script = ExtResource("35")
arrows_config = ExtResource("36")
ground_elements_manager_path = NodePath("../GroundElementsManager")
floating_text_scene = ExtResource("37")

[node name="GroundElementsManager" type="Node2D" parent="MainCanvas/PlantManager/ScrollController/RootScrollContainer/RootManager" groups=["NotCentered"]]
script = ExtResource("21")
ground_elements_config = ExtResource("22")
terrain_path = NodePath("../Terrain")
arrows_controller_path = NodePath("../ArrowsController")
root_scroll_container_path = NodePath("../..")

[node name="Terrain" parent="MainCanvas/PlantManager/ScrollController/RootScrollContainer/RootManager" instance=ExtResource("10")]

[node name="Root" type="Node2D" parent="MainCanvas/PlantManager/ScrollController/RootScrollContainer/RootManager"]
position = Vector2(360, 0)
script = ExtResource("5")
tree_structure_config = ExtResource("16")

[node name="VisualMetricSystem" type="Node2D" parent="MainCanvas/PlantManager"]
script = ExtResource("29")
scroll_controller_path = NodePath("../ScrollController")
plant_control_node_path = NodePath("../ScrollController/PlantScrollContainer/Control")
root_control_node_path = NodePath("../ScrollController/RootScrollContainer/RootManager")
metric_system_config = ExtResource("30")

[node name="UI" type="CanvasLayer" parent="."]

[node name="TopHUD" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("25")
SC_label_path = NodePath("MarginContainer/Control/MainHUDBG/RichTextLabel")
HC_label_path = NodePath("MarginContainer/Control/HCHolder/RichTextLabel")

[node name="MarginContainer" type="MarginContainer" parent="UI/TopHUD"]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20

[node name="Control" type="Control" parent="UI/TopHUD/MarginContainer"]
layout_mode = 2
mouse_filter = 2

[node name="MainHUDBG" type="ColorRect" parent="UI/TopHUD/MarginContainer/Control"]
layout_mode = 0
offset_right = 220.0
offset_bottom = 80.0
color = Color(0.929412, 0.929412, 0.929412, 1)

[node name="RichTextLabel" type="RichTextLabel" parent="UI/TopHUD/MarginContainer/Control/MainHUDBG"]
modulate = Color(0, 0, 0, 1)
layout_mode = 0
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 10.0
offset_top = -20.0
offset_right = 143.0
offset_bottom = 20.0
theme_override_fonts/normal_font = ExtResource("24")
bbcode_enabled = true
text = "0"
scroll_active = false

[node name="ProgressBarPlaceHolder" type="ColorRect" parent="UI/TopHUD/MarginContainer/Control"]
layout_mode = 0
offset_top = 90.0
offset_right = 250.0
offset_bottom = 105.0
color = Color(0.329412, 1, 0.478431, 1)

[node name="HCHolder" type="ColorRect" parent="UI/TopHUD/MarginContainer/Control"]
layout_mode = 0
anchor_left = 1.0
anchor_right = 1.0
offset_left = -150.0
offset_bottom = 45.0
color = Color(0.929412, 0.929412, 0.929412, 1)

[node name="RichTextLabel" type="RichTextLabel" parent="UI/TopHUD/MarginContainer/Control/HCHolder"]
modulate = Color(0, 0, 0, 1)
layout_mode = 0
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -66.5
offset_top = -15.5
offset_right = 66.5
offset_bottom = 15.5
theme_override_fonts/normal_font = ExtResource("24")
bbcode_enabled = true
text = "0"
scroll_active = false

[node name="SettingsButton" type="Button" parent="UI/TopHUD/MarginContainer/Control"]
layout_mode = 0
anchor_left = 1.0
anchor_right = 1.0
offset_left = -68.0
offset_top = 80.0
offset_bottom = 148.0
pivot_offset = Vector2(30, -5)

[node name="StoreButton" type="Button" parent="UI/TopHUD/MarginContainer/Control"]
layout_mode = 0
anchor_left = 1.0
anchor_right = 1.0
offset_left = -68.0
offset_top = 170.0
offset_bottom = 238.0
pivot_offset = Vector2(30, -5)

[node name="BottomHUD" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="VBoxContainer" type="VBoxContainer" parent="UI/BottomHUD"]
layout_mode = 0
anchor_top = 0.8
anchor_right = 1.0
anchor_bottom = 1.0

[node name="HBoxContainer" type="HBoxContainer" parent="UI/BottomHUD/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ButtonsVBoxContainer(VAlignement)2" type="VBoxContainer" parent="UI/BottomHUD/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
size_flags_stretch_ratio = 0.2

[node name="MarginContainer" type="MarginContainer" parent="UI/BottomHUD/VBoxContainer/HBoxContainer/ButtonsVBoxContainer(VAlignement)2"]
layout_mode = 2
theme_override_constants/margin_left = 15
theme_override_constants/margin_top = 15
theme_override_constants/margin_right = 15
theme_override_constants/margin_bottom = 15

[node name="ButtonsHBoxContainer" type="HBoxContainer" parent="UI/BottomHUD/VBoxContainer/HBoxContainer/ButtonsVBoxContainer(VAlignement)2/MarginContainer"]
custom_minimum_size = Vector2(90, 90)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 0
theme_override_constants/separation = 20
script = ExtResource("32")
draggable_buttons_config = ExtResource("33")
bottom_scroll_container_control_path = NodePath("../../../../../../../MainCanvas/PlantManager/ScrollController/RootScrollContainer/RootManager")
top_scroll_container_control_path = NodePath("../../../../../../../MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control")
terrain_path = NodePath("../../../../../../../MainCanvas/PlantManager/ScrollController/RootScrollContainer/RootManager/Terrain")
ground_elements_manager_path = NodePath("../../../../../../../MainCanvas/PlantManager/ScrollController/RootScrollContainer/RootManager/GroundElementsManager")
train_path = NodePath("../../../../../../../MainCanvas/PlantManager/ScrollController/PlantScrollContainer/Control/Train")
arrow_controller_path = NodePath("../../../../../../../MainCanvas/PlantManager/ScrollController/RootScrollContainer/RootManager/ArrowsController")

[node name="UpgradesController" type="HBoxContainer" parent="UI/BottomHUD/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
size_flags_stretch_ratio = 5.46
theme_override_constants/separation = 20
script = ExtResource("42")
expandable_cells_controller_path = NodePath("ExpandablesCellsController")
upgrades_config = ExtResource("44")
upgrade_cell = ExtResource("13")

[node name="ExpandablesCellsController" type="VBoxContainer" parent="UI/BottomHUD/VBoxContainer/UpgradesController"]
custom_minimum_size = Vector2(0, 114)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("43")

[node name="MarginContainer" type="MarginContainer" parent="UI/BottomHUD/VBoxContainer/UpgradesController/ExpandablesCellsController"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 15
theme_override_constants/margin_bottom = 5

[node name="ExpandableCellsContainer" type="Container" parent="UI/BottomHUD/VBoxContainer/UpgradesController/ExpandablesCellsController/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("41")

[node name="Popups" type="Control" parent="UI"]
layout_mode = 3
anchor_left = 0.3
anchor_top = 0.138
anchor_right = 0.71
anchor_bottom = 0.871
offset_left = -181.0
offset_top = 0.199982
offset_right = 173.8
offset_bottom = -0.600098
mouse_filter = 2
script = ExtResource("14")

[node name="OfflineProductionPopup" parent="UI/Popups" instance=ExtResource("40")]
visible = false
layout_mode = 1
grow_horizontal = 2
grow_vertical = 2

[node name="SettingsPopup" parent="UI/Popups" instance=ExtResource("15")]
visible = false
layout_mode = 1
grow_horizontal = 2
grow_vertical = 2
open_button_path = NodePath("../../TopHUD/MarginContainer/Control/SettingsButton")

[node name="Screens" type="Control" parent="UI"]
layout_mode = 3
anchor_top = 0.128
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -6.8
mouse_filter = 2
script = ExtResource("18")

[node name="StoreScreen" parent="UI/Screens" instance=ExtResource("17")]
visible = false
layout_mode = 1
grow_horizontal = 2
grow_vertical = 2
open_button_path = NodePath("../../TopHUD/MarginContainer/Control/StoreButton")

[node name="BoostsScreen" parent="UI/Screens" instance=ExtResource("34")]
visible = false
anchors_preset = 0

[node name="SubViewport" type="SubViewport" parent="."]
transparent_bg = true
size = Vector2i(900, 250)

[node name="low_poly_truck" parent="SubViewport" instance=ExtResource("4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.38432, 0)
